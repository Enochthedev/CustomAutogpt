# Gems Ai Agent

Gems AI Agent is a modular, self-improving AI system built in .NET. It uses a combination of dynamic task generation, model routing, and vector-based memory to create an agent that can evolve over time. The system is designed to be easily extended via dependency injection (DI) and configuration.

â¸»

## Table of Contents

 â€¢ Overview
 â€¢ Project Structure
 â€¢ Setup and Configuration
 â€¢ Running the Agent
 â€¢ Key Components
 â€¢ Agent Core
 â€¢ Tasks
 â€¢ Memory
 â€¢ AI Model Integration
 â€¢ Learned Tasks and Metadata
 â€¢ Extending the System
 â€¢ Future Enhancements
 â€¢ License

â¸»

## Overview

Gems AI Agent is designed to mimic a self-improving system:
 â€¢ Dynamic Task Generation: The agent can generate new tasks (as C# code) based on user prompts.
 â€¢ Model Routing: It intelligently selects the best available AI model for a given task.
 â€¢ Vector Memory: It uses a vector-based memory store with embeddings for contextual retrieval.
 â€¢ Self-Extensibility: The agent can learn by saving new tasks and recalling them in future sessions.

â¸»

## Project Structure

The solution is organized into several projects and folders:

``` bash
GemsAi.sln
â”‚
â”œâ”€â”€ Core/                      // Core library for AI agent logic.
â”‚   â”œâ”€â”€ Agent/                // Agent interface and implementation.
â”‚   â”‚   â”œâ”€â”€ IAgent.cs         // Defines the IAgent interface.
â”‚   â”‚   â””â”€â”€ ChronoAgent.cs    // The core agent that orchestrates tasks.
â”‚   â”‚
â”‚   â”œâ”€â”€ Tasks/                // Contains task definitions.
â”‚   â”‚   â”œâ”€â”€ ITask.cs          // Interface for tasks.
â”‚   â”‚   â”œâ”€â”€ EchoTask.cs       // A simple task that echoes input.
â”‚   â”‚   â”œâ”€â”€ StatusTask.cs     // Reports current AI model status.
â”‚   â”‚   â”œâ”€â”€ ModelListTask.cs  // Lists available AI models.
â”‚   â”‚   â”œâ”€â”€ CreateTaskCommand.cs  // Generates new tasks dynamically.
â”‚   â”‚   â”œâ”€â”€ LLMTask.cs        // A general-purpose task using the AI model.
â”‚   â”‚   â””â”€â”€ TaskMetadataQueryTask.cs  // Queries metadata about generated tasks.
â”‚   â”‚
â”‚   â”œâ”€â”€ Memory/               // Memory system interfaces and implementations.
â”‚   â”‚   â”œâ”€â”€ IMemoryStore.cs   // Key-value memory interface.
â”‚   â”‚   â”œâ”€â”€ InMemoryMemoryStore.cs // Implementation of key-value memory.
â”‚   â”‚   â”œâ”€â”€ IVectorMemoryStore.cs // Interface for vector-based memory.
â”‚   â”‚   â”œâ”€â”€ InMemoryVectorMemoryStore.cs // Implementation for vector memory.
â”‚   â”‚   â”œâ”€â”€ IEmbedder.cs      // Interface for text embedder.
â”‚   â”‚   â”œâ”€â”€ OllamaEmbedder.cs // Embedder using Ollama's API.
â”‚   â”‚   â””â”€â”€ MLNetEmbedder.cs  // Embedder using ML.NET (ONNX model).
â”‚   â”‚
â”‚   â”œâ”€â”€ LearnedTasks/         // Storage for tasks generated by the agent.
â”‚   â”‚   â”œâ”€â”€ LearnedTaskManager.cs  // Loads learned tasks from disk.
â”‚   â”‚   â””â”€â”€ LearnedTaskMetadataManager.cs  // Records metadata about generated tasks.
â”‚   â”‚
â”‚   â””â”€â”€ AI/                   // AI model integrations.
â”‚       â”œâ”€â”€ IAIClient.cs      // Interface for AI clients.
â”‚       â”œâ”€â”€ OllamaClient.cs   // Implementation using Ollama (with model routing).
â”‚       â”œâ”€â”€ ModelRegistry.cs  // Registry of known models and their strengths.
â”‚       â””â”€â”€ ModelRouter.cs    // Chooses the best model based on task description.
â”‚
â”œâ”€â”€ Runner/                    // Console application for running the agent.
â”‚   â””â”€â”€ Program.cs            // Bootstraps DI, registers services, and runs the main loop.
â”‚
â”œâ”€â”€ appsettings.json           // Configuration file for endpoints, embedder selection, etc.
â””â”€â”€ GemsAi.sln                 // Solution file.
```

â¸»

## Setup and Configuration

## Prerequisites

 â€¢ .NET 6/7/9 SDK
 â€¢ Ollama (for generation and embedding, if using Ollama-based implementations)
 â€¢ Optionally, an ONNX model for the MLNetEmbedder

## Configuration

Edit the appsettings.json file to adjust the configuration parameters:

```bash
{
  "Embedding": {
    "UseOllama": true,
    "OllamaEndpoint": "<http://localhost:11434>",
    "ONNXModelPath": "path/to/your/model.onnx"
  },
  "AI": {
    "DefaultModel": "smollm2:1.7b"
  },
  "Logging": {
    "LogLevel": "Information"
  }
}
```

 â€¢ Embedding Settings: Choose whether to use the Ollama embedder or ML.NET embedder.
 â€¢ Default AI Model: Sets the default model for your AI tasks.
 â€¢ Logging: Basic logging configuration (expand as needed).

## DI Setup

Your DI container is set up in Runner/Program.cs using Microsoft.Extensions.DependencyInjection along with Scrutor for auto-registration of tasks. This means:
 â€¢ All classes implementing ITask are automatically registered.
 â€¢ Configuration values are read from appsettings.json.

â¸»

## Running the Agent

 1. Restore and Build:
In the solution directory, run:

```bash
dotnet restore
dotnet build
```

 2. Run the Runner Project:
Execute:

```bash
dotnet run --project Runner
```

 1. Interact with the Agent:
The agent will prompt:

```bash
ðŸ¤– Gems AI Agent Ready!
>
```

You can then type commands like:
 â€¢ echo hello â€“ to test basic tasks.
 â€¢ what model are you using? â€“ to check model status.
 â€¢ list models â€“ to list available AI models.
 â€¢ create a task that reverses any string input from the user â€“ to generate a new task.
 â€¢ what model did you use to create it? â€“ to query metadata on generated tasks.

â¸»

## Key Components

### Agent Core

 â€¢ IAgent: Defines the contract for the agent.
 â€¢ GemsAgent: The main agent that processes user input and dispatches tasks.

### Tasks

 â€¢ ITask: Interface for all tasks.
 â€¢ EchoTask, StatusTask, ModelListTask, LLMTask: Example tasks that perform basic functions.
 â€¢ CreateTaskCommand: Dynamically generates new task code.
 â€¢ TaskMetadataQueryTask: Queries metadata about generated tasks.

### Memory

 â€¢ IMemoryStore & InMemoryMemoryStore: Simple key-value memory for storing session data.
 â€¢ IVectorMemoryStore & InMemoryVectorMemoryStore: A vector-based memory store that uses embeddings to store and retrieve semantically similar text.
 â€¢ IEmbedder: Interface for generating text embeddings.
 â€¢ OllamaEmbedder & MLNetEmbedder: Two implementations for generating embeddings using either Ollamaâ€™s API or an ML.NET ONNX model.

### AI Integration

 â€¢ IAIClient & OllamaClient: Interface and implementation for generating text using AI models.
 â€¢ ModelRegistry & ModelRouter: Components that manage available models and select the best model for a given task.

### Learned Tasks

 â€¢ LearnedTaskManager: Loads dynamically created tasks from disk.
 â€¢ LearnedTaskMetadataManager: Records metadata (such as the model used) for generated tasks.

â¸»

## Extending the System

 â€¢ Add New Tasks: Simply create a new class that implements ITask in the Core/Tasks folder. It will be auto-registered.
 â€¢ Change the Embedder: Update the configuration in appsettings.json to switch between OllamaEmbedder and MLNetEmbedder.
 â€¢ Enhance Memory: Extend the memory system to persist data between sessions or to use advanced vector databases like Qdrant or Pinecone.
 â€¢ Improve Task Generation: Integrate error feedback loops and automatic code validation (e.g., using Roslyn).

â¸»

## Future Enhancements

 â€¢ Dynamic Learning: Allow the agent to continuously learn and generate new tasks based on feedback.
 â€¢ NLP Integration: Use advanced NLP techniques to improve model routing and task generation.
 â€¢ Persistent Memory: Transition from in-memory to a persistent vector memory store.
 â€¢ Web/API Interface: Add a web-based UI or API for interacting with the agent.

â¸»

## License

This project is licensed under the MIT License â€“ see the LICENSE file for details.
